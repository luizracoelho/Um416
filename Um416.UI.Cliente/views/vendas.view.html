<div ng-controller="vendasController as vm" ng-init="vm.list();">
    <div class="alert alert-danger" ng-show="vm.error != null">
        {{vm.error}}
    </div>

    <div class="panel panel-default">
        <div class="panel-heading">
            <h4><i class="fa fa-">Icon</i> Compras</h4>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-6" ng-show="vm.showGrid()">
                    <span class="input-group">
                        <input type="text" ng-model="filtro" placeholder="Pesquisar" class="form-control" />
                        <span class="input-group-addon"><i class="fa fa-search"></i></span>
                    </span>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12" ng-show="!vm.showGrid()">
                    <h5>
                        Nenhum registro encontrado!
                    </h5>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12 col-md-6" ng-repeat="venda in vm.vendas | filter: filtro" ng-show="vm.showGrid()">
            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="dropdown pull-right visible-xs">
                        <button type="button" class="btn btn-sm btn-link" dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Compartilhar"><i class="fa fa-ellipsis-v fa-lg text-primary"></i></button>
                        <ul class="dropdown-menu dropdown-menu-right">
                            <li>
                                <a href="javascript:;" class="h5" ng-click=""><i class="fa fa-refresh text-primary" style="width: 24px"></i> Detalhar</a>
                            </li>
                        </ul>
                    </div>
                    <span class="h4">
                        <span class="text-muted">#{{venda.id}}</span> Lote {{venda.lote.codigo}}
                        <br />
                        <small>{{venda.lote.loteamento.nome}}</small>
                    </span>
                    <div class="row">
                        <hr style="margin-top: 5px; margin-bottom: 5px;" />
                    </div>
                    <table class="table table-condensed" style="margin-bottom: auto;">
                        <tr>
                            <th><i class="fa fa-money"></i> Valor do lote</th>
                            <td class="text-right">{{venda.valor | currency}}</td>
                        </tr>
                        <tr>
                            <th><i class="fa fa-money"></i> Valor da parcela</th>
                            <td class="text-right">{{venda.valorParcela | currency}}</td>
                        </tr>
                        <tr>
                            <th><i class="fa fa-calendar"></i> Vencimento</th>
                            <td class="text-right">Dia {{venda.diaVencimento}}</td>
                        </tr>
                        <tr>
                            <th><i class="fa fa-bookmark-o"></i> Pagas/Total    </th>
                            <td class="text-right">0/{{venda.quantParcelas}}
                            <td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <div class="input-group col-xs-12">
                                    <input type="text" class="form-control" id="url" ng-model="venda.lote.loteamento.url" readonly />
                                    <div class="input-group-btn">
                                        <button class="btn btn-default" type="button" title="Copiar" ng-click="vm.copy()"><i class="fa fa-clipboard fa-lg"></i></button>
                                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Compartilhar"><i class="fa fa-share-alt fa-lg"></i></button>
                                        <ul class="dropdown-menu dropdown-menu-right">
                                            <li><a ng-href="mailto:?subject={{venda.lote.loteamento.nome}}&body=Adquira seu lote {{venda.lote.loteamento.url | encode}}" class="h5"><i class="fa fa-envelope-o text-muted" style="width: 24px"></i> E-mail</a></li>
                                            <li><a onclick="window.open(this.href, 'whatsapp-share','width=560, height=300');return false;" ng-href=" https://api.whatsapp.com/send?text={{venda.lote.loteamento.nome}}, adquira seu lote {{venda.lote.loteamento.url | encode}}" class="h5"><i class="fa fa-whatsapp text-success" style="width: 24px"></i> WhatsApp</a></li>
                                            <li><a onclick="window.open(this.href, 'facebook-share','width=560, height=300');return false;" ng-href="https://www.facebook.com/sharer/sharer.php?u={{venda.lote.loteamento.url | encode}}" class="h5"><i class="fa fa-facebook text-primary" style="width: 24px"></i> Facebook</a></li>
                                            <li><a onclick="window.open(this.href, 'twitter-share', 'width=550, height=300');return false;" ng-href="https://twitter.com/intent/tweet?text=Adquira seu lote&hashtags={{venda.lote.loteamento.nomeHashtag}} {{venda.lote.loteamento.url | encode}}" class="h5"><i class="fa fa-twitter text-info" style="width: 24px"></i> Twitter</a></li>
                                            <li><a onclick="window.open(this.href, 'google-plus-share', 'width=400, height=530');return false;" ng-href="https://plus.google.com/share?url={{venda.lote.loteamento.url | encode}}" class="h5"><i class="fa fa-google-plus text-danger" style="width: 24px"></i> Google Plus</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </table>
                    <!--<div class="hidden-xs">
                        <div class="row">
                            <hr style="margin-top: 6px; margin-bottom: 12px;" />
                        </div>
                        <button class="btn btn-sm btn-primary" ng-click=""><i class="fa fa-refresh"></i> Teste</button>
                        <button class="btn btn-sm btn-success" ng-click=""><i class="fa fa-refresh"></i> Teste</button>
                    </div>-->
                </div>
            </div>
        </div>
    </div>
</div>
